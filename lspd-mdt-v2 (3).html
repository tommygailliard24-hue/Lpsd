<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LSPD MDT - Urban City | Version Officielle</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0B1120;
            --bg-secondary: #151D2F;
            --bg-tertiary: #1E2841;
            --bg-card: #232D45;
            --accent-primary: #3B82F6;
            --accent-secondary: #60A5FA;
            --accent-success: #10B981;
            --accent-warning: #F59E0B;
            --accent-danger: #EF4444;
            --accent-info: #06B6D4;
            --text-primary: #F9FAFB;
            --text-secondary: #9CA3AF;
            --text-tertiary: #6B7280;
            --border-primary: #2A3552;
            --border-secondary: #374151;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.2);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.3);
            --shadow-blue: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #0A0F1C 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
            pointer-events: none;
            animation: backgroundShift 30s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-5%, -5%); }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1800px;
            margin: 0 auto;
            padding: 24px;
        }

        .header {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 24px 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header-logo {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 900;
            color: white;
            box-shadow: var(--shadow-blue);
        }

        .header-info h1 {
            font-size: 24px;
            font-weight: 800;
            color: var(--text-primary);
            letter-spacing: -0.5px;
            margin-bottom: 4px;
        }

        .header-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .badge-urban {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent-info), var(--accent-primary));
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-left: 8px;
        }

        .header-right {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--accent-success);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            color: var(--accent-success);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--accent-success);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.1); }
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-tertiary);
            padding: 8px 16px 8px 8px;
            border-radius: 10px;
            border: 1px solid var(--border-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-profile:hover {
            background: var(--bg-card);
            border-color: var(--accent-primary);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            color: white;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .user-badge {
            font-size: 12px;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
        }

        .btn-logout {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid var(--border-secondary);
            color: var(--text-secondary);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .btn-logout:hover {
            background: var(--accent-danger);
            border-color: var(--accent-danger);
            color: white;
        }

        .nav-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-md);
            animation: fadeIn 0.6s ease-out 0.1s backwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-tabs {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .nav-tab {
            background: transparent;
            border: 1px solid transparent;
            color: var(--text-secondary);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Inter', sans-serif;
        }

        .nav-tab:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .nav-tab.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        }

        .content-section {
            display: none;
            animation: slideIn 0.4s ease-out;
        }

        .content-section.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-15px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
        }

        .panel:hover {
            box-shadow: var(--shadow-lg);
        }

        .panel-header {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent-primary);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 900;
            color: var(--accent-primary);
            margin-bottom: 8px;
            line-height: 1;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            color: var(--text-primary);
            padding: 12px 16px;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background: var(--bg-card);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            background: var(--accent-secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-primary);
        }

        .btn-secondary:hover {
            background: var(--bg-card);
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        .btn-success {
            background: var(--accent-success);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--accent-danger);
            color: white;
        }

        .btn-danger:hover {
            background: #DC2626;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: var(--accent-warning);
            color: white;
        }

        .btn-warning:hover {
            background: #D97706;
            transform: translateY(-2px);
        }

        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid var(--border-primary);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table thead {
            background: var(--bg-tertiary);
        }

        .data-table th {
            padding: 14px 16px;
            text-align: left;
            font-weight: 700;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-primary);
        }

        .data-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border-primary);
            color: var(--text-primary);
            font-size: 14px;
        }

        .data-table tbody tr {
            background: var(--bg-secondary);
            transition: all 0.2s ease;
        }

        .data-table tbody tr:hover {
            background: var(--bg-tertiary);
        }

        .search-bar {
            position: relative;
            margin-bottom: 20px;
        }

        .search-bar input {
            width: 100%;
            padding: 14px 48px 14px 20px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background: var(--bg-card);
        }

        .search-icon {
            position: absolute;
            right: 18px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            color: var(--text-tertiary);
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent-primary);
        }

        .card-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .card-info {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .badge-active {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-success);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .badge-pending {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-warning);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .badge-danger {
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-danger);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .badge-info {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-primary);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .badge-closed {
            background: rgba(107, 114, 128, 0.15);
            color: var(--text-secondary);
            border: 1px solid rgba(107, 114, 128, 0.3);
        }

        .image-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .image-preview-item {
            position: relative;
            border: 2px solid var(--border-primary);
            border-radius: 10px;
            overflow: hidden;
            background: var(--bg-tertiary);
            transition: all 0.3s ease;
        }

        .image-preview-item:hover {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-md);
        }

        .image-preview-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            display: block;
        }

        .image-remove-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--accent-danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .image-remove-btn:hover {
            background: #DC2626;
            transform: scale(1.1);
        }

        .image-caption {
            padding: 10px;
            font-size: 12px;
            color: var(--text-secondary);
            text-align: center;
            background: var(--bg-card);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeInModal 0.3s ease-out;
        }

        @keyframes fadeInModal {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 40px;
            max-width: 480px;
            width: 90%;
            box-shadow: var(--shadow-xl);
            animation: slideUpModal 0.4s ease-out;
        }

        @keyframes slideUpModal {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .modal-logo {
            width: 72px;
            height: 72px;
            margin: 0 auto 16px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: 900;
            color: white;
            box-shadow: var(--shadow-blue);
        }

        .modal-title {
            font-size: 28px;
            font-weight: 900;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .modal-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .demo-accounts {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 10px;
            padding: 20px;
            margin-top: 24px;
        }

        .demo-accounts-title {
            font-size: 12px;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
        }

        .demo-account {
            font-size: 13px;
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .demo-account:hover {
            background: var(--bg-card);
        }

        .demo-account strong {
            color: var(--accent-primary);
        }

        .panel-highlight {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(16, 185, 129, 0.05));
            border: 1px solid var(--accent-primary);
        }

        .panel-warning {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.05), rgba(217, 119, 6, 0.05));
            border: 1px solid var(--accent-warning);
        }

        .info-box {
            background: var(--bg-tertiary);
            border-left: 4px solid var(--accent-info);
            padding: 16px;
            border-radius: 8px;
            margin-top: 16px;
        }

        .info-box-title {
            font-weight: 700;
            color: var(--accent-info);
            margin-bottom: 8px;
            font-size: 14px;
        }

        .info-box-content {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .miranda-box {
            background: var(--bg-tertiary);
            border: 2px solid var(--accent-warning);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .miranda-box h3 {
            color: var(--accent-warning);
            margin-bottom: 12px;
            font-size: 16px;
        }

        .miranda-box p {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .traffic-code-item {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .traffic-code-item:hover {
            border-color: var(--accent-warning);
            background: var(--bg-card);
        }

        .traffic-code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .traffic-code-title {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 14px;
        }

        .traffic-code-fine {
            color: var(--accent-warning);
            font-weight: 700;
            font-size: 14px;
        }

        .traffic-code-desc {
            color: var(--text-secondary);
            font-size: 13px;
        }

        .civilian-detail-card {
            background: var(--bg-tertiary);
            border: 2px solid var(--accent-primary);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .civilian-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-primary);
        }

        .civilian-detail-name {
            font-size: 24px;
            font-weight: 800;
            color: var(--text-primary);
        }

        .civilian-detail-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 600;
        }

        .info-value {
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .empty-state-text {
            font-size: 14px;
        }

        @media (max-width: 1024px) {
            .header {
                flex-direction: column;
                gap: 16px;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .nav-tabs {
                flex-direction: column;
            }
            .cards-grid {
                grid-template-columns: 1fr;
            }
        }

        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-logo">üöî</div>
                <h2 class="modal-title">LSPD MDT</h2>
                <p class="modal-subtitle">Los Santos Police Department ‚Ä¢ <span class="badge-urban">URBAN CITY</span></p>
                <p class="modal-subtitle" style="margin-top: 8px;">Connexion s√©curis√©e au terminal</p>
            </div>
            
            <form onsubmit="login(event)">
                <div class="form-group">
                    <label>Num√©ro de Badge</label>
                    <input type="text" id="badgeNumber" placeholder="Ex: 1001" required>
                </div>
                <div class="form-group">
                    <label>Code PIN</label>
                    <input type="password" id="pinCode" placeholder="4 chiffres" maxlength="4" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">
                    üîê Se connecter
                </button>
            </form>

            <div class="demo-accounts">
                <p class="demo-accounts-title">Comptes de d√©monstration</p>
                <div class="demo-account">üéì <strong>Cadet</strong> - Badge: 1001 | PIN: 1111</div>
                <div class="demo-account">üëÆ <strong>Officier I</strong> - Badge: 2001 | PIN: 2222</div>
                <div class="demo-account">üéñÔ∏è <strong>Sergent</strong> - Badge: 3001 | PIN: 3333</div>
                <div class="demo-account">‚≠ê <strong>Lieutenant</strong> - Badge: 4001 | PIN: 4444</div>
                <div class="demo-account">üíº <strong>Capitaine</strong> - Badge: 5001 | PIN: 5555</div>
                <div class="demo-account">üëë <strong>Commandant</strong> - Badge: 6001 | PIN: 6666</div>
                <div class="demo-account">üèÜ <strong>Chief of Police</strong> - Badge: 9999 | PIN: 9999</div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="header-logo">üöî</div>
                <div class="header-info">
                    <h1>LSPD MDT</h1>
                    <p class="header-subtitle">
                        Los Santos Police Department <span class="badge-urban">URBAN CITY</span> ‚Ä¢ Terminal de Donn√©es Mobile v3.0
                    </p>
                </div>
            </div>
            <div class="header-right">
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    EN SERVICE
                </div>
                <div class="user-profile">
                    <div class="user-avatar">JD</div>
                    <div class="user-details">
                        <div class="user-name">Agent John Doe</div>
                        <div class="user-badge">#1247</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-container">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="switchTab('dashboard')">
                    üìä Tableau de bord
                </button>
                <button class="nav-tab" onclick="switchTab('dispatch')">
                    üì° Dispatch
                </button>
                <button class="nav-tab" onclick="switchTab('reports')">
                    üìã Rapports
                </button>
                <button class="nav-tab" onclick="switchTab('civilians')">
                    üë§ Recensement
                </button>
                <button class="nav-tab" onclick="switchTab('tickets')">
                    üö¶ Tickets Routiers
                </button>
                <button class="nav-tab" onclick="switchTab('miranda')">
                    ‚öñÔ∏è Droits Miranda
                </button>
                <button class="nav-tab" onclick="switchTab('vehicles')">
                    üöó V√©hicules
                </button>
                <button class="nav-tab" onclick="switchTab('personnel')">
                    üëÆ Personnel
                </button>
            </div>
        </nav>

        <!-- Dashboard -->
        <section id="dashboard" class="content-section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Appels actifs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Rapports ce mois</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Tickets √©mis</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Agents en service</div>
                </div>
            </div>

            <div class="panel panel-highlight">
                <div class="panel-header">
                    <span class="icon">üî´</span>
                    Gestion des Permis de Port d'Arme (PPA)
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" style="color: var(--accent-success);">0</div>
                        <div class="stat-label">PPA Valides</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" style="color: var(--accent-warning);">0</div>
                        <div class="stat-label">PPA Expir√©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" style="color: var(--accent-danger);">0</div>
                        <div class="stat-label">PPA R√©voqu√©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" style="color: var(--accent-info);">0</div>
                        <div class="stat-label">Demandes en attente</div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üì°</span>
                    Dispatch r√©cents
                </div>
                <div class="empty-state">
                    <div class="empty-state-icon">üì°</div>
                    <div class="empty-state-title">Aucun dispatch r√©cent</div>
                    <div class="empty-state-text">Les dispatch appara√Ætront ici</div>
                </div>
            </div>
        </section>

        <!-- Dispatch -->
        <section id="dispatch" class="content-section">
            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üì°</span>
                    Nouveau Dispatch
                </div>
                <form onsubmit="submitDispatch(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Type d'incident</label>
                            <select required>
                                <option value="">S√©lectionner...</option>
                                <option>10-10 (Combat en cours)</option>
                                <option>10-11 (Braquage en cours)</option>
                                <option>10-31 (Vol en cours)</option>
                                <option>10-32 (Homme arm√©)</option>
                                <option>10-50 (Accident de la circulation)</option>
                                <option>10-55 (Conduite en √©tat d'ivresse)</option>
                                <option>10-66 (Suspect suspect)</option>
                                <option>10-90 (Alarme d√©clench√©e)</option>
                                <option>Code 2 (Urgence non vitale)</option>
                                <option>Code 3 (Urgence vitale)</option>
                                <option>Contr√¥le routier</option>
                                <option>Assistance citoyenne</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Priorit√©</label>
                            <select required>
                                <option value="">S√©lectionner...</option>
                                <option>üü¢ Faible</option>
                                <option>üü° Moyenne</option>
                                <option>üü† √âlev√©e</option>
                                <option>üî¥ Critique</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Localisation</label>
                            <input type="text" placeholder="Adresse pr√©cise ou intersection" required>
                        </div>
                        <div class="form-group">
                            <label>Unit√©s assign√©es</label>
                            <input type="text" placeholder="Ex: 2-Alpha, 3-Bravo">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description de la situation</label>
                        <textarea placeholder="D√©tails de l'incident..." required></textarea>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-primary">üì° Envoyer le dispatch</button>
                        <button type="reset" class="btn btn-secondary">‚Üª Annuler</button>
                    </div>
                </form>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üìã</span>
                    Dispatch en cours
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Rechercher un dispatch...">
                    <span class="search-icon">üîç</span>
                </div>
                <div class="empty-state">
                    <div class="empty-state-icon">üì°</div>
                    <div class="empty-state-title">Aucun dispatch en cours</div>
                    <div class="empty-state-text">Les dispatch actifs appara√Ætront ici</div>
                </div>
            </div>
        </section>

        <!-- Reports -->
        <section id="reports" class="content-section">
            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üìù</span>
                    Nouveau Rapport d'Intervention
                </div>
                <form onsubmit="submitReport(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Type de rapport</label>
                            <select required>
                                <option value="">S√©lectionner...</option>
                                <option>Arrestation</option>
                                <option>Accident de la circulation</option>
                                <option>Vol</option>
                                <option>Agression</option>
                                <option>Contravention</option>
                                <option>Enqu√™te</option>
                                <option>Intervention domestique</option>
                                <option>Trouble √† l'ordre public</option>
                                <option>Autre</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date & Heure</label>
                            <input type="datetime-local" required>
                        </div>
                        <div class="form-group">
                            <label>Localisation</label>
                            <input type="text" placeholder="Ex: Legion Square" required>
                        </div>
                        <div class="form-group">
                            <label>Personnes impliqu√©es</label>
                            <input type="text" id="reportCivilianName" placeholder="Nom(s) ou ID">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description d√©taill√©e de l'intervention</label>
                        <textarea placeholder="D√©crivez les faits en d√©tail..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Preuves / Notes suppl√©mentaires</label>
                        <textarea placeholder="T√©moignages, √©l√©ments de preuve, etc."></textarea>
                    </div>
                    <div class="form-group">
                        <label>üì∏ Photos / Preuves visuelles</label>
                        <input type="file" id="reportPhotos" accept="image/*" multiple onchange="previewReportImages(event)">
                        <div id="reportImagePreview" class="image-preview-grid"></div>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-primary">‚úì Soumettre le rapport</button>
                        <button type="reset" class="btn btn-secondary">‚Üª R√©initialiser</button>
                    </div>
                </form>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üìÅ</span>
                    Rapports r√©cents
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Rechercher par num√©ro, type ou localisation...">
                    <span class="search-icon">üîç</span>
                </div>
                <div class="empty-state">
                    <div class="empty-state-icon">üìã</div>
                    <div class="empty-state-title">Aucun rapport enregistr√©</div>
                    <div class="empty-state-text">Les rapports cr√©√©s appara√Ætront ici</div>
                </div>
            </div>
        </section>

        <!-- Civilians (avec syst√®me de recherche li√©) -->
        <section id="civilians" class="content-section">
            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üîç</span>
                    Recherche de citoyen
                </div>
                <div class="search-bar">
                    <input type="text" id="civilianSearchInput" placeholder="Rechercher par nom ou pr√©nom..." onkeyup="searchCivilian()">
                    <span class="search-icon">üîç</span>
                </div>
                <div id="civilianSearchResults"></div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">‚ûï</span>
                    Nouveau recensement
                </div>
                <form onsubmit="submitCivilian(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nom</label>
                            <input type="text" id="civilianLastName" required>
                        </div>
                        <div class="form-group">
                            <label>Pr√©nom</label>
                            <input type="text" id="civilianFirstName" required>
                        </div>
                        <div class="form-group">
                            <label>Date de naissance</label>
                            <input type="date" required>
                        </div>
                        <div class="form-group">
                            <label>Sexe</label>
                            <select required>
                                <option value="">S√©lectionner...</option>
                                <option>Homme</option>
                                <option>Femme</option>
                                <option>Autre</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>T√©l√©phone</label>
                            <input type="tel" placeholder="555-0100">
                        </div>
                        <div class="form-group">
                            <label>Adresse</label>
                            <input type="text" placeholder="123 Main St">
                        </div>
                        <div class="form-group">
                            <label>üî´ Permis de Port d'Arme (PPA)</label>
                            <select id="ppaStatus">
                                <option value="none">Aucun permis</option>
                                <option value="valid">PPA Valide</option>
                                <option value="expired">PPA Expir√©</option>
                                <option value="suspended">PPA Suspendu</option>
                                <option value="revoked">PPA R√©voqu√©</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date d'expiration PPA</label>
                            <input type="date" id="ppaExpiry">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>üì∏ Photo d'identit√©</label>
                        <input type="file" id="civilianPhoto" accept="image/*" onchange="previewCivilianImage(event)">
                        <div id="civilianImagePreview" class="image-preview-grid"></div>
                    </div>
                    <div class="form-group">
                        <label>Casier judiciaire / Notes</label>
                        <textarea placeholder="Ant√©c√©dents, mandats, notes..."></textarea>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-success">‚úì Ajouter au registre</button>
                        <button type="reset" class="btn btn-secondary">‚Üª Effacer</button>
                    </div>
                </form>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üë•</span>
                    Base de donn√©es citoyens
                </div>
                <div id="civilianDatabase" class="empty-state">
                    <div class="empty-state-icon">üë§</div>
                    <div class="empty-state-title">Aucun citoyen recens√©</div>
                    <div class="empty-state-text">Les citoyens ajout√©s appara√Ætront ici</div>
                </div>
            </div>
        </section>

        <!-- Traffic Tickets -->
        <section id="tickets" class="content-section">
            <div class="panel panel-warning">
                <div class="panel-header">
                    <span class="icon">üö¶</span>
                    Nouveau Ticket Routier
                </div>
                <form onsubmit="submitTicket(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nom du contrevenant</label>
                            <input type="text" id="ticketCivilianName" placeholder="Nom Pr√©nom" required>
                        </div>
                        <div class="form-group">
                            <label>Plaque d'immatriculation</label>
                            <input type="text" placeholder="ABC 123" style="text-transform: uppercase;" required>
                        </div>
                        <div class="form-group">
                            <label>Date & Heure</label>
                            <input type="datetime-local" required>
                        </div>
                        <div class="form-group">
                            <label>Localisation</label>
                            <input type="text" placeholder="Lieu de l'infraction" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Infraction(s) commise(s)</label>
                        <select id="ticketInfraction" multiple size="10" style="min-height: 200px;" required>
                            <optgroup label="Exc√®s de vitesse">
                                <option value="exces_10">Exc√®s de vitesse 1-10 km/h - 50$</option>
                                <option value="exces_20">Exc√®s de vitesse 11-20 km/h - 100$</option>
                                <option value="exces_30">Exc√®s de vitesse 21-30 km/h - 200$</option>
                                <option value="exces_plus">Exc√®s de vitesse 30+ km/h - 350$</option>
                            </optgroup>
                            <optgroup label="Circulation">
                                <option value="feu_rouge">Griller un feu rouge - 150$</option>
                                <option value="stop">Non-respect d'un stop - 150$</option>
                                <option value="priority">Non-respect de priorit√© - 100$</option>
                                <option value="sens_interdit">Circulation en sens interdit - 200$</option>
                                <option value="ligne_continue">Franchissement ligne continue - 150$</option>
                                <option value="distance_securite">Non-respect distance s√©curit√© - 100$</option>
                            </optgroup>
                            <optgroup label="Stationnement">
                                <option value="stationnement_interdit">Stationnement interdit - 75$</option>
                                <option value="stationnement_gene">Stationnement g√™nant - 100$</option>
                                <option value="stationnement_handicape">Stationnement place handicap√© - 250$</option>
                            </optgroup>
                            <optgroup label="V√©hicule">
                                <option value="ceinture">D√©faut de port ceinture - 100$</option>
                                <option value="telephone">Usage t√©l√©phone en conduisant - 150$</option>
                                <option value="phares">D√©faut d'√©clairage - 75$</option>
                                <option value="plaque">Plaque illisible/absente - 200$</option>
                                <option value="assurance">D√©faut d'assurance - 500$</option>
                                <option value="permis">Conduite sans permis - 1000$</option>
                            </optgroup>
                            <optgroup label="Conduite dangereuse">
                                <option value="conduite_dangereuse">Conduite dangereuse - 400$</option>
                                <option value="alcool">Conduite sous influence alcool - 750$</option>
                                <option value="drogue">Conduite sous influence drogue - 1000$</option>
                                <option value="delit_fuite">D√©lit de fuite - 1500$</option>
                                <option value="course_poursuite">Course poursuite - 2000$</option>
                            </optgroup>
                        </select>
                        <small style="color: var(--text-secondary); margin-top: 8px; display: block;">Maintenez Ctrl (Windows) ou Cmd (Mac) pour s√©lectionner plusieurs infractions</small>
                    </div>
                    <div class="form-group">
                        <label>Montant total de l'amende</label>
                        <input type="number" id="ticketAmount" placeholder="Montant en $" required readonly style="font-size: 18px; font-weight: 700; color: var(--accent-warning);">
                    </div>
                    <div class="form-group">
                        <label>Notes suppl√©mentaires</label>
                        <textarea placeholder="Circonstances, comportement du conducteur..."></textarea>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-warning">üö¶ √âmettre le ticket</button>
                        <button type="reset" class="btn btn-secondary">‚Üª Annuler</button>
                    </div>
                </form>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üìú</span>
                    Code de la route - Amendements
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Rechercher une infraction..." onkeyup="filterTrafficCodes(this.value)">
                    <span class="search-icon">üîç</span>
                </div>
                <div id="trafficCodeList">
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Exc√®s de vitesse 1-10 km/h</div>
                            <div class="traffic-code-fine">50$</div>
                        </div>
                        <div class="traffic-code-desc">D√©passement de la limitation de vitesse de 1 √† 10 km/h</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Exc√®s de vitesse 11-20 km/h</div>
                            <div class="traffic-code-fine">100$</div>
                        </div>
                        <div class="traffic-code-desc">D√©passement de la limitation de vitesse de 11 √† 20 km/h</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Exc√®s de vitesse 21-30 km/h</div>
                            <div class="traffic-code-fine">200$</div>
                        </div>
                        <div class="traffic-code-desc">D√©passement de la limitation de vitesse de 21 √† 30 km/h</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Exc√®s de vitesse 30+ km/h</div>
                            <div class="traffic-code-fine">350$</div>
                        </div>
                        <div class="traffic-code-desc">D√©passement de la limitation de vitesse de plus de 30 km/h - Suspension possible</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Griller un feu rouge</div>
                            <div class="traffic-code-fine">150$</div>
                        </div>
                        <div class="traffic-code-desc">Non-respect d'un feu de signalisation rouge</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Non-respect d'un stop</div>
                            <div class="traffic-code-fine">150$</div>
                        </div>
                        <div class="traffic-code-desc">Ne pas marquer l'arr√™t complet √† un panneau STOP</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Non-respect de priorit√©</div>
                            <div class="traffic-code-fine">100$</div>
                        </div>
                        <div class="traffic-code-desc">Ne pas c√©der le passage quand requis</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Circulation en sens interdit</div>
                            <div class="traffic-code-fine">200$</div>
                        </div>
                        <div class="traffic-code-desc">Circuler dans le mauvais sens de circulation</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Franchissement ligne continue</div>
                            <div class="traffic-code-fine">150$</div>
                        </div>
                        <div class="traffic-code-desc">Franchir une ligne continue pour doubler ou changer de voie</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Non-respect distance de s√©curit√©</div>
                            <div class="traffic-code-fine">100$</div>
                        </div>
                        <div class="traffic-code-desc">Ne pas maintenir une distance s√©curitaire avec le v√©hicule pr√©c√©dent</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Stationnement interdit</div>
                            <div class="traffic-code-fine">75$</div>
                        </div>
                        <div class="traffic-code-desc">Stationner dans une zone interdite</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Stationnement g√™nant</div>
                            <div class="traffic-code-fine">100$</div>
                        </div>
                        <div class="traffic-code-desc">Stationner de mani√®re √† g√™ner la circulation ou l'acc√®s</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Stationnement place handicap√©</div>
                            <div class="traffic-code-fine">250$</div>
                        </div>
                        <div class="traffic-code-desc">Stationner sur une place r√©serv√©e aux personnes handicap√©es sans autorisation</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">D√©faut de port de ceinture</div>
                            <div class="traffic-code-fine">100$</div>
                        </div>
                        <div class="traffic-code-desc">Ne pas porter la ceinture de s√©curit√©</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Usage t√©l√©phone en conduisant</div>
                            <div class="traffic-code-fine">150$</div>
                        </div>
                        <div class="traffic-code-desc">Utiliser un t√©l√©phone portable en conduisant</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">D√©faut d'√©clairage</div>
                            <div class="traffic-code-fine">75$</div>
                        </div>
                        <div class="traffic-code-desc">Circuler sans feux allum√©s quand requis</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Plaque illisible/absente</div>
                            <div class="traffic-code-fine">200$</div>
                        </div>
                        <div class="traffic-code-desc">Plaque d'immatriculation manquante, cach√©e ou illisible</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">D√©faut d'assurance</div>
                            <div class="traffic-code-fine">500$</div>
                        </div>
                        <div class="traffic-code-desc">Circuler sans assurance valide - V√©hicule mis en fourri√®re</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Conduite sans permis</div>
                            <div class="traffic-code-fine">1000$</div>
                        </div>
                        <div class="traffic-code-desc">Conduire sans permis valide ou avec permis suspendu - V√©hicule mis en fourri√®re</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Conduite dangereuse</div>
                            <div class="traffic-code-fine">400$</div>
                        </div>
                        <div class="traffic-code-desc">Conduite mettant en danger autrui - Suspension possible</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Conduite sous influence alcool</div>
                            <div class="traffic-code-fine">750$</div>
                        </div>
                        <div class="traffic-code-desc">Conduire avec taux d'alcool√©mie sup√©rieur √† la limite - Suspension de permis</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Conduite sous influence drogue</div>
                            <div class="traffic-code-fine">1000$</div>
                        </div>
                        <div class="traffic-code-desc">Conduire sous l'effet de stup√©fiants - Suspension de permis</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">D√©lit de fuite</div>
                            <div class="traffic-code-fine">1500$</div>
                        </div>
                        <div class="traffic-code-desc">Quitter les lieux d'un accident - Arrestation possible</div>
                    </div>
                    <div class="traffic-code-item">
                        <div class="traffic-code-header">
                            <div class="traffic-code-title">Course poursuite / Refus d'obtemp√©rer</div>
                            <div class="traffic-code-fine">2000$</div>
                        </div>
                        <div class="traffic-code-desc">Fuir un contr√¥le policier - Arrestation et mise en fourri√®re</div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üé´</span>
                    Tickets √©mis r√©cemment
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Rechercher par nom ou plaque...">
                    <span class="search-icon">üîç</span>
                </div>
                <div class="empty-state">
                    <div class="empty-state-icon">üö¶</div>
                    <div class="empty-state-title">Aucun ticket √©mis</div>
                    <div class="empty-state-text">Les tickets routiers appara√Ætront ici</div>
                </div>
            </div>
        </section>

        <!-- Miranda Rights -->
        <section id="miranda" class="content-section">
            <div class="panel">
                <div class="panel-header">
                    <span class="icon">‚öñÔ∏è</span>
                    Droits Miranda - Lecture Obligatoire lors d'une Arrestation
                </div>
                
                <div class="miranda-box">
                    <h3>üìú DROITS MIRANDA - √Ä LIRE AU SUSPECT</h3>
                    <p><strong>1. Droit de garder le silence</strong></p>
                    <p>"Vous avez le droit de garder le silence. Tout ce que vous direz pourra et sera utilis√© contre vous devant un tribunal."</p>
                    
                    <p><strong>2. Droit √† un avocat</strong></p>
                    <p>"Vous avez le droit de parler √† un avocat et d'avoir un avocat pr√©sent pendant votre interrogatoire."</p>
                    
                    <p><strong>3. Avocat commis d'office</strong></p>
                    <p>"Si vous ne pouvez pas vous permettre un avocat, un vous sera d√©sign√© gratuitement avant tout interrogatoire."</p>
                    
                    <p><strong>4. Renonciation au droit</strong></p>
                    <p>"Vous pouvez d√©cider √† tout moment d'exercer ces droits et de ne pas r√©pondre aux questions ou de faire une d√©claration."</p>
                </div>

                <div class="info-box">
                    <div class="info-box-title">üìå Informations Importantes</div>
                    <div class="info-box-content">
                        <strong>Quand lire les droits Miranda ?</strong><br>
                        ‚Ä¢ Lors de toute arrestation formelle<br>
                        ‚Ä¢ Avant tout interrogatoire en garde √† vue<br>
                        ‚Ä¢ D√®s qu'une personne est priv√©e de libert√©<br><br>
                        
                        <strong>Cons√©quences du non-respect :</strong><br>
                        ‚Ä¢ Nullit√© de l'interrogatoire<br>
                        ‚Ä¢ Preuves irrecevables au tribunal<br>
                        ‚Ä¢ Possibilit√© de lib√©ration du suspect<br><br>
                        
                        <strong>Documentation :</strong><br>
                        ‚Ä¢ Toujours noter l'heure de lecture des droits<br>
                        ‚Ä¢ Demander confirmation de compr√©hension<br>
                        ‚Ä¢ Documenter toute renonciation aux droits
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üìã</span>
                    Proc√©dure d'Arrestation Standard
                </div>
                <div style="line-height: 2;">
                    <p style="color: var(--text-secondary); margin-bottom: 10px;"><strong>1. Identification du suspect</strong></p>
                    <p style="color: var(--text-secondary); margin-bottom: 20px; padding-left: 20px;">‚Üí V√©rifier l'identit√©<br>‚Üí Confirmer le mandat d'arr√™t ou les charges</p>
                    
                    <p style="color: var(--text-secondary); margin-bottom: 10px;"><strong>2. Menottage et s√©curisation</strong></p>
                    <p style="color: var(--text-secondary); margin-bottom: 20px; padding-left: 20px;">‚Üí Menottes dans le dos<br>‚Üí Fouille de s√©curit√©</p>
                    
                    <p style="color: var(--text-secondary); margin-bottom: 10px;"><strong>3. Lecture des droits Miranda</strong></p>
                    <p style="color: var(--text-secondary); margin-bottom: 20px; padding-left: 20px;">‚Üí Lire chaque point clairement<br>‚Üí Demander confirmation de compr√©hension</p>
                    
                    <p style="color: var(--text-secondary); margin-bottom: 10px;"><strong>4. Transport au poste</strong></p>
                    <p style="color: var(--text-secondary); margin-bottom: 20px; padding-left: 20px;">‚Üí Installer √† l'arri√®re du v√©hicule<br>‚Üí Boucler la ceinture de s√©curit√©</p>
                    
                    <p style="color: var(--text-secondary); margin-bottom: 10px;"><strong>5. Booking (Enregistrement)</strong></p>
                    <p style="color: var(--text-secondary); margin-bottom: 20px; padding-left: 20px;">‚Üí Photo et empreintes<br>‚Üí Inventaire des effets personnels<br>‚Üí V√©rification casier judiciaire</p>
                    
                    <p style="color: var(--text-secondary); margin-bottom: 10px;"><strong>6. Documentation</strong></p>
                    <p style="color: var(--text-secondary); padding-left: 20px;">‚Üí Remplir le rapport d'arrestation<br>‚Üí Consigner tous les √©l√©ments de preuve</p>
                </div>
            </div>
        </section>

        <!-- Vehicles -->
        <section id="vehicles" class="content-section">
            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üîç</span>
                    Recherche de v√©hicule
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Plaque d'immatriculation</label>
                        <input type="text" id="plateSearch" placeholder="Ex: ABC 123" style="text-transform: uppercase;">
                    </div>
                    <div class="form-group">
                        <label>Mod√®le</label>
                        <input type="text" placeholder="Ex: Infernus">
                    </div>
                    <div class="form-group">
                        <label>Couleur</label>
                        <input type="text" placeholder="Ex: Rouge">
                    </div>
                    <div class="form-group" style="display: flex; align-items: flex-end;">
                        <button class="btn btn-primary" style="width: 100%;">üîç Rechercher</button>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üöò</span>
                    V√©hicules enregistr√©s
                </div>
                <div class="empty-state">
                    <div class="empty-state-icon">üöó</div>
                    <div class="empty-state-title">Aucun v√©hicule enregistr√©</div>
                    <div class="empty-state-text">Les v√©hicules appara√Ætront ici apr√®s une recherche</div>
                </div>
            </div>
        </section>

        <!-- Personnel -->
        <section id="personnel" class="content-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">0</div>
                    <div class="stat-label">En service</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Hors service</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0</div>
                    <div class="stat-label">En pause</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Total personnel</div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="icon">üëÆ</span>
                    Personnel en service
                </div>
                <div class="empty-state">
                    <div class="empty-state-icon">üëÆ</div>
                    <div class="empty-state-title">Aucun agent en service</div>
                    <div class="empty-state-text">Les agents en service appara√Ætront ici</div>
                </div>
            </div>
        </section>
    </div>

    <script>
        const users = {
            '1001': { pin: '1111', name: 'John Doe', rank: 'Cadet', permissions: ['reports_view'] },
            '2001': { pin: '2222', name: 'Mike Ross', rank: 'Officier I', permissions: ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch'] },
            '3001': { pin: '3333', name: 'Sarah Connor', rank: 'Sergent', permissions: ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch', 'personnel_view', 'edit_reports'] },
            '4001': { pin: '4444', name: 'James Gordon', rank: 'Lieutenant', permissions: ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch', 'personnel_view', 'edit_reports', 'manage_officers'] },
            '5001': { pin: '5555', name: 'Steve Rogers', rank: 'Capitaine', permissions: ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch', 'personnel_view', 'edit_reports', 'manage_officers', 'department_stats'] },
            '6001': { pin: '6666', name: 'Alex Murphy', rank: 'Commandant', permissions: ['all'] },
            '9999': { pin: '9999', name: 'Frank Castle', rank: 'Chief of Police', permissions: ['all'] }
        };

        let currentUser = null;
        let reportImages = [];
        let civilianImage = null;

        // Simulated databases (in real app, this would be server-side)
        let civilians = [];
        let reports = [];
        let tickets = [];

        // Traffic code fines mapping
        const trafficFines = {
            'exces_10': 50,
            'exces_20': 100,
            'exces_30': 200,
            'exces_plus': 350,
            'feu_rouge': 150,
            'stop': 150,
            'priority': 100,
            'sens_interdit': 200,
            'ligne_continue': 150,
            'distance_securite': 100,
            'stationnement_interdit': 75,
            'stationnement_gene': 100,
            'stationnement_handicape': 250,
            'ceinture': 100,
            'telephone': 150,
            'phares': 75,
            'plaque': 200,
            'assurance': 500,
            'permis': 1000,
            'conduite_dangereuse': 400,
            'alcool': 750,
            'drogue': 1000,
            'delit_fuite': 1500,
            'course_poursuite': 2000
        };

        function login(event) {
            event.preventDefault();
            const badge = document.getElementById('badgeNumber').value;
            const pin = document.getElementById('pinCode').value;

            if (users[badge] && users[badge].pin === pin) {
                currentUser = { badge, ...users[badge] };
                document.getElementById('loginModal').style.display = 'none';
                updateUserInterface();
                alert(`‚úÖ Connexion r√©ussie !\n\nBienvenue ${currentUser.rank} ${currentUser.name}\nBadge #${currentUser.badge}`);
            } else {
                alert('‚ùå Acc√®s refus√© !\n\nBadge ou PIN incorrect.');
            }
        }

        function logout() {
            if (confirm('√ätes-vous s√ªr de vouloir vous d√©connecter ?')) {
                location.reload();
            }
        }

        function updateUserInterface() {
            const userAvatar = document.querySelector('.user-avatar');
            const userName = document.querySelector('.user-name');
            const userBadgeElem = document.querySelector('.user-badge');
            
            userAvatar.textContent = currentUser.name.split(' ').map(n => n[0]).join('');
            userName.textContent = `${currentUser.rank} ${currentUser.name}`;
            userBadgeElem.textContent = `#${currentUser.badge}`;

            const headerRight = document.querySelector('.header-right');
            const logoutBtn = document.createElement('button');
            logoutBtn.className = 'btn-logout';
            logoutBtn.textContent = 'üö™ D√©connexion';
            logoutBtn.onclick = logout;
            headerRight.appendChild(logoutBtn);

            if (hasPermission('all')) {
                addAdministrationTab();
            }
        }

        function hasPermission(permission) {
            if (!currentUser) return false;
            return currentUser.permissions.includes('all') || currentUser.permissions.includes(permission);
        }

        function addAdministrationTab() {
            const navTabs = document.querySelector('.nav-tabs');
            const adminTab = document.createElement('button');
            adminTab.className = 'nav-tab';
            adminTab.innerHTML = '‚öôÔ∏è Administration';
            adminTab.onclick = () => switchTab('administration');
            navTabs.appendChild(adminTab);

            const container = document.querySelector('.container');
            const adminSection = document.createElement('section');
            adminSection.id = 'administration';
            adminSection.className = 'content-section';
            adminSection.innerHTML = `
                <div class="panel">
                    <div class="panel-header">
                        <span class="icon">üë•</span>
                        Gestion du Personnel
                    </div>
                    <form onsubmit="addOfficer(event)">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Num√©ro de Badge</label>
                                <input type="text" id="newBadge" placeholder="Ex: 1050" required>
                            </div>
                            <div class="form-group">
                                <label>Nom complet</label>
                                <input type="text" id="newName" placeholder="Pr√©nom Nom" required>
                            </div>
                            <div class="form-group">
                                <label>Rang</label>
                                <select id="newRank" required>
                                    <option value="">S√©lectionner...</option>
                                    <option value="Cadet">üéì Cadet</option>
                                    <option value="Officier I">üëÆ Officier I</option>
                                    <option value="Officier II">üëÆ‚Äç‚ôÇÔ∏è Officier II</option>
                                    <option value="Officier III">üëÆ‚Äç‚ôÄÔ∏è Officier III</option>
                                    <option value="Sergent">üéñÔ∏è Sergent</option>
                                    <option value="Lieutenant">‚≠ê Lieutenant</option>
                                    <option value="Capitaine">üíº Capitaine</option>
                                    <option value="Commandant">üëë Commandant</option>
                                    <option value="Chief of Police">üèÜ Chief of Police</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Code PIN (4 chiffres)</label>
                                <input type="text" id="newPin" placeholder="1234" maxlength="4" required>
                            </div>
                        </div>
                        <div class="btn-group">
                            <button type="submit" class="btn btn-success">‚úì Ajouter l'agent</button>
                            <button type="reset" class="btn btn-secondary">‚Üª R√©initialiser</button>
                        </div>
                    </form>
                </div>

                <div class="panel">
                    <div class="panel-header">
                        <span class="icon">üìä</span>
                        Statistiques du d√©partement
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value">0</div>
                            <div class="stat-label">Rapports ce mois</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">0</div>
                            <div class="stat-label">Arrestations</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">0</div>
                            <div class="stat-label">Tickets √©mis</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">0$</div>
                            <div class="stat-label">Amendes collect√©es</div>
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(adminSection);
        }

        function addOfficer(event) {
            event.preventDefault();
            const badge = document.getElementById('newBadge').value;
            const name = document.getElementById('newName').value;
            const rank = document.getElementById('newRank').value;
            const pin = document.getElementById('newPin').value;

            if (users[badge]) {
                alert('‚ùå Ce num√©ro de badge existe d√©j√† !');
                return;
            }

            let permissions;
            if (rank === 'Cadet') permissions = ['reports_view'];
            else if (rank === 'Officier I' || rank === 'Officier II') permissions = ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch'];
            else if (rank === 'Officier III') permissions = ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch', 'edit_reports'];
            else if (rank === 'Sergent') permissions = ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch', 'personnel_view', 'edit_reports'];
            else if (rank === 'Lieutenant') permissions = ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch', 'personnel_view', 'edit_reports', 'manage_officers'];
            else if (rank === 'Capitaine') permissions = ['reports', 'civilians', 'vehicles', 'tickets', 'dispatch', 'personnel_view', 'edit_reports', 'manage_officers', 'department_stats'];
            else permissions = ['all'];

            users[badge] = { pin, name, rank, permissions };

            alert(`‚úÖ Agent ajout√© avec succ√®s !\n\nBadge: #${badge}\nNom: ${name}\nRang: ${rank}`);
            event.target.reset();
        }

        function switchTab(tabName) {
            if (tabName === 'administration' && !hasPermission('all')) {
                alert('‚ùå Acc√®s refus√© !\n\nVous devez √™tre Commandant ou Chief of Police.');
                return;
            }

            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Calculate total fine when infractions are selected
        document.addEventListener('DOMContentLoaded', function() {
            const infractionSelect = document.getElementById('ticketInfraction');
            const amountInput = document.getElementById('ticketAmount');
            
            if (infractionSelect && amountInput) {
                infractionSelect.addEventListener('change', function() {
                    let total = 0;
                    const selected = Array.from(this.selectedOptions);
                    selected.forEach(option => {
                        const code = option.value;
                        total += trafficFines[code] || 0;
                    });
                    amountInput.value = total;
                });
            }

            const plateInput = document.getElementById('plateSearch');
            if (plateInput) {
                plateInput.addEventListener('input', function() {
                    this.value = this.value.toUpperCase();
                });
            }
        });

        function filterTrafficCodes(searchTerm) {
            const items = document.querySelectorAll('.traffic-code-item');
            searchTerm = searchTerm.toLowerCase();
            
            items.forEach(item => {
                const title = item.querySelector('.traffic-code-title').textContent.toLowerCase();
                const desc = item.querySelector('.traffic-code-desc').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || desc.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function previewReportImages(event) {
            const files = event.target.files;
            const preview = document.getElementById('reportImagePreview');
            preview.innerHTML = '';
            reportImages = [];

            Array.from(files).forEach((file, index) => {
                if (file && file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        reportImages.push(e.target.result);
                        const imgContainer = document.createElement('div');
                        imgContainer.className = 'image-preview-item';
                        imgContainer.innerHTML = `
                            <img src="${e.target.result}">
                            <button type="button" onclick="removeReportImage(${index})" class="image-remove-btn">√ó</button>
                            <div class="image-caption">Photo ${index + 1}</div>
                        `;
                        preview.appendChild(imgContainer);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function removeReportImage(index) {
            reportImages.splice(index, 1);
            document.getElementById('reportPhotos').value = '';
            document.getElementById('reportImagePreview').innerHTML = '';
            alert('‚úì Photo supprim√©e');
        }

        function previewCivilianImage(event) {
            const file = event.target.files[0];
            const preview = document.getElementById('civilianImagePreview');
            preview.innerHTML = '';

            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    civilianImage = e.target.result;
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'image-preview-item';
                    imgContainer.innerHTML = `
                        <img src="${e.target.result}" style="height: 250px;">
                        <div class="image-caption">Photo d'identit√©</div>
                    `;
                    preview.appendChild(imgContainer);
                };
                reader.readAsDataURL(file);
            }
        }

        function submitDispatch(event) {
            event.preventDefault();
            if (!hasPermission('dispatch') && !hasPermission('all')) {
                alert('‚ùå Permission refus√©e');
                return;
            }
            alert(`‚úÖ Dispatch envoy√©\n\nDispatcher: ${currentUser.rank} ${currentUser.name}`);
            event.target.reset();
        }

        function submitReport(event) {
            event.preventDefault();
            if (!hasPermission('reports') && !hasPermission('all')) {
                alert('‚ùå Permission refus√©e');
                return;
            }
            const reportNum = Math.floor(Math.random() * 9000 + 1000);
            const civilianName = document.getElementById('reportCivilianName').value;
            const reportType = event.target.querySelector('select[required]').value;
            const location = event.target.querySelectorAll('input[type="text"]')[0].value;
            const description = event.target.querySelectorAll('textarea')[0].value;
            
            // Store report
            reports.push({
                id: reportNum,
                type: reportType,
                civilianName: civilianName,
                location: location,
                description: description,
                officer: currentUser.name,
                badge: currentUser.badge,
                date: new Date().toISOString(),
                photos: reportImages.length
            });
            
            alert(`‚úÖ Rapport #${reportNum} soumis avec succ√®s\n\nAgent: ${currentUser.rank} ${currentUser.name}\nüì∏ Photos: ${reportImages.length}`);
            event.target.reset();
            reportImages = [];
            document.getElementById('reportImagePreview').innerHTML = '';
            updateReportsList();
            updateDashboardStats();
        }

        function updateReportsList() {
            const reportsSection = document.querySelector('#reports .panel:last-child');
            const container = reportsSection.querySelector('.cards-grid') || reportsSection.querySelector('.empty-state').parentElement;
            
            if (reports.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <div class="empty-state-title">Aucun rapport enregistr√©</div>
                        <div class="empty-state-text">Les rapports cr√©√©s appara√Ætront ici</div>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="cards-grid">
                        ${reports.slice().reverse().map(report => `
                            <div class="card">
                                <div class="card-title">Rapport #${report.id}</div>
                                <div class="card-info">üìÖ ${new Date(report.date).toLocaleDateString('fr-FR')} - ${new Date(report.date).toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' })}</div>
                                <div class="card-info">üìç ${report.location}</div>
                                <div class="card-info">üë§ ${report.civilianName || 'N/A'}</div>
                                <div class="card-info">üëÆ ${report.officer}</div>
                                <span class="badge badge-${report.type === 'Arrestation' ? 'danger' : report.type === 'Enqu√™te' ? 'info' : 'pending'}">${report.type}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        }

        function submitCivilian(event) {
            event.preventDefault();
            if (!hasPermission('civilians') && !hasPermission('all')) {
                alert('‚ùå Permission refus√©e');
                return;
            }
            
            const lastName = document.getElementById('civilianLastName').value;
            const firstName = document.getElementById('civilianFirstName').value;
            const dob = event.target.querySelector('input[type="date"]').value;
            const sex = event.target.querySelectorAll('select')[0].value;
            const phone = event.target.querySelector('input[type="tel"]').value;
            const address = event.target.querySelectorAll('input[type="text"]')[2].value;
            const ppaStatus = document.getElementById('ppaStatus').value;
            const ppaExpiry = document.getElementById('ppaExpiry').value;
            const notes = event.target.querySelector('textarea').value;
            
            // Store civilian
            civilians.push({
                id: Date.now(),
                lastName: lastName,
                firstName: firstName,
                fullName: `${firstName} ${lastName}`,
                dob: dob,
                sex: sex,
                phone: phone,
                address: address,
                ppa: ppaStatus,
                ppaExpiry: ppaExpiry,
                notes: notes,
                photo: civilianImage,
                addedBy: currentUser.name,
                date: new Date().toISOString()
            });
            
            alert(`‚úÖ Citoyen ajout√© au registre\n\nNom: ${firstName} ${lastName}\nAgent: ${currentUser.rank} ${currentUser.name}\nüî´ PPA: ${ppaStatus}\nüì∏ Photo: ${civilianImage ? 'Oui' : 'Non'}`);
            event.target.reset();
            civilianImage = null;
            document.getElementById('civilianImagePreview').innerHTML = '';
            updateCivilianDatabase();
            updateDashboardStats();
        }

        function submitTicket(event) {
            event.preventDefault();
            if (!hasPermission('tickets') && !hasPermission('all')) {
                alert('‚ùå Permission refus√©e');
                return;
            }
            
            const civilianName = document.getElementById('ticketCivilianName').value;
            const plate = event.target.querySelectorAll('input[type="text"]')[1].value;
            const dateTime = event.target.querySelector('input[type="datetime-local"]').value;
            const location = event.target.querySelectorAll('input[type="text"]')[2].value;
            const amount = document.getElementById('ticketAmount').value;
            const infractionSelect = document.getElementById('ticketInfraction');
            const infractions = Array.from(infractionSelect.selectedOptions).map(opt => opt.text);
            const notes = event.target.querySelector('textarea').value;
            const ticketNum = Math.floor(Math.random() * 9000 + 1000);
            
            // Store ticket
            tickets.push({
                id: ticketNum,
                civilianName: civilianName,
                plate: plate,
                dateTime: dateTime,
                location: location,
                infractions: infractions,
                amount: amount,
                notes: notes,
                officer: currentUser.name,
                badge: currentUser.badge,
                date: new Date().toISOString()
            });
            
            alert(`‚úÖ Ticket routier #${ticketNum} √©mis\n\nContrevenant: ${civilianName}\nMontant: ${amount}$\nAgent: ${currentUser.rank} ${currentUser.name}`);
            event.target.reset();
            updateTicketsList();
            updateDashboardStats();
        }

        function updateTicketsList() {
            const ticketsSection = document.querySelector('#tickets .panel:last-child');
            const container = ticketsSection.querySelector('.cards-grid') || ticketsSection.querySelector('.empty-state').parentElement;
            
            if (tickets.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üö¶</div>
                        <div class="empty-state-title">Aucun ticket √©mis</div>
                        <div class="empty-state-text">Les tickets routiers appara√Ætront ici</div>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="cards-grid">
                        ${tickets.slice().reverse().map(ticket => `
                            <div class="card">
                                <div class="card-title">Ticket #${ticket.id}</div>
                                <div class="card-info">üë§ ${ticket.civilianName}</div>
                                <div class="card-info">üöó Plaque: ${ticket.plate}</div>
                                <div class="card-info">üìç ${ticket.location}</div>
                                <div class="card-info">üìÖ ${new Date(ticket.date).toLocaleDateString('fr-FR')}</div>
                                <div class="card-info">üëÆ ${ticket.officer}</div>
                                <span class="badge badge-warning">${ticket.amount}$</span>
                                <div style="margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
                                    ${ticket.infractions.slice(0, 2).join(', ')}${ticket.infractions.length > 2 ? '...' : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        }

        function updateCivilianDatabase() {
            const dbDiv = document.getElementById('civilianDatabase');
            if (civilians.length === 0) {
                dbDiv.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üë§</div>
                        <div class="empty-state-title">Aucun citoyen recens√©</div>
                        <div class="empty-state-text">Les citoyens ajout√©s appara√Ætront ici</div>
                    </div>
                `;
            } else {
                dbDiv.innerHTML = `
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nom complet</th>
                                    <th>Date de naissance</th>
                                    <th>T√©l√©phone</th>
                                    <th>üî´ PPA</th>
                                    <th>Rapports</th>
                                    <th>Tickets</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${civilians.slice().reverse().map(c => {
                                    const civilianReports = reports.filter(r => r.civilianName && r.civilianName.toLowerCase() === c.fullName.toLowerCase());
                                    const civilianTickets = tickets.filter(t => t.civilianName.toLowerCase() === c.fullName.toLowerCase());
                                    return `
                                        <tr>
                                            <td><strong>${c.fullName}</strong></td>
                                            <td>${new Date(c.dob).toLocaleDateString('fr-FR')}</td>
                                            <td>${c.phone || 'N/A'}</td>
                                            <td><span class="badge ${c.ppa === 'valid' ? 'badge-active' : c.ppa === 'none' ? 'badge-closed' : 'badge-danger'}">${c.ppa === 'valid' ? 'Valide' : c.ppa === 'none' ? 'Aucun' : c.ppa}</span></td>
                                            <td><span class="badge ${civilianReports.length > 0 ? 'badge-info' : 'badge-closed'}">${civilianReports.length}</span></td>
                                            <td><span class="badge ${civilianTickets.length > 0 ? 'badge-warning' : 'badge-closed'}">${civilianTickets.length}</span></td>
                                            <td><button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="viewCivilianDetails('${c.fullName}')">Voir d√©tails</button></td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            }
        }

        function viewCivilianDetails(fullName) {
            // Simulate clicking on search
            document.getElementById('civilianSearchInput').value = fullName;
            searchCivilian();
            // Scroll to results
            document.getElementById('civilianSearchResults').scrollIntoView({ behavior: 'smooth' });
        }

        function updateDashboardStats() {
            // Update stats on dashboard
            const statsCards = document.querySelectorAll('#dashboard .stat-card .stat-value');
            if (statsCards.length >= 3) {
                statsCards[1].textContent = reports.length; // Rapports ce mois
                statsCards[2].textContent = tickets.length; // Tickets √©mis
            }

            // Update PPA stats
            const ppaStats = document.querySelectorAll('#dashboard .panel-highlight .stat-card .stat-value');
            if (ppaStats.length >= 4) {
                const validPPA = civilians.filter(c => c.ppa === 'valid').length;
                const expiredPPA = civilians.filter(c => c.ppa === 'expired').length;
                const revokedPPA = civilians.filter(c => c.ppa === 'revoked').length;
                
                ppaStats[0].textContent = validPPA;
                ppaStats[1].textContent = expiredPPA;
                ppaStats[2].textContent = revokedPPA;
            }
        }

        function searchCivilian() {
            const searchTerm = document.getElementById('civilianSearchInput').value.toLowerCase();
            const resultsDiv = document.getElementById('civilianSearchResults');
            
            if (searchTerm.length < 2) {
                resultsDiv.innerHTML = '';
                return;
            }
            
            const matches = civilians.filter(c => 
                c.firstName.toLowerCase().includes(searchTerm) || 
                c.lastName.toLowerCase().includes(searchTerm) ||
                c.fullName.toLowerCase().includes(searchTerm)
            );
            
            if (matches.length === 0) {
                resultsDiv.innerHTML = '<div class="empty-state" style="padding: 20px;"><div class="empty-state-text">Aucun citoyen trouv√©</div></div>';
                return;
            }
            
            resultsDiv.innerHTML = matches.map(civilian => {
                const civilianReports = reports.filter(r => r.civilianName.toLowerCase() === civilian.fullName.toLowerCase());
                const civilianTickets = tickets.filter(t => t.civilianName.toLowerCase() === civilian.fullName.toLowerCase());
                
                return `
                    <div class="civilian-detail-card">
                        <div class="civilian-detail-header">
                            <div class="civilian-detail-name">${civilian.fullName}</div>
                            <span class="badge badge-info">ID: ${civilian.id}</span>
                        </div>
                        <div class="civilian-detail-info">
                            <div class="info-item">
                                <div class="info-label">PPA</div>
                                <div class="info-value">${civilian.ppa === 'valid' ? '‚úÖ Valide' : civilian.ppa === 'none' ? '‚ùå Aucun' : '‚ö†Ô∏è ' + civilian.ppa}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Rapports</div>
                                <div class="info-value">${civilianReports.length} rapport(s)</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Tickets</div>
                                <div class="info-value">${civilianTickets.length} ticket(s)</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ajout√© par</div>
                                <div class="info-value">${civilian.addedBy}</div>
                            </div>
                        </div>
                        ${civilianReports.length > 0 ? `
                            <div style="margin-top: 20px;">
                                <div style="font-weight: 700; margin-bottom: 10px; color: var(--accent-primary);">üìã Rapports d'intervention:</div>
                                ${civilianReports.map(r => `
                                    <div style="background: var(--bg-tertiary); padding: 12px; border-radius: 8px; margin-bottom: 8px; border-left: 3px solid var(--accent-primary);">
                                        <strong>Rapport #${r.id}</strong> - ${new Date(r.date).toLocaleDateString('fr-FR')}<br>
                                        <small style="color: var(--text-secondary);">Par: ${r.officer} (Badge #${r.badge}) ‚Ä¢ ${r.photos} photo(s)</small>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                        ${civilianTickets.length > 0 ? `
                            <div style="margin-top: 20px;">
                                <div style="font-weight: 700; margin-bottom: 10px; color: var(--accent-warning);">üö¶ Tickets routiers:</div>
                                ${civilianTickets.map(t => `
                                    <div style="background: var(--bg-tertiary); padding: 12px; border-radius: 8px; margin-bottom: 8px; border-left: 3px solid var(--accent-warning);">
                                        <strong>Ticket #${t.id}</strong> - Amende: ${t.amount}$ - ${new Date(t.date).toLocaleDateString('fr-FR')}<br>
                                        <small style="color: var(--text-secondary);">Par: ${t.officer} (Badge #${t.badge})</small>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function updateCivilianDatabase() {
            const dbDiv = document.getElementById('civilianDatabase');
            if (civilians.length === 0) {
                dbDiv.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üë§</div>
                        <div class="empty-state-title">Aucun citoyen recens√©</div>
                        <div class="empty-state-text">Les citoyens ajout√©s appara√Ætront ici</div>
                    </div>
                `;
            } else {
                dbDiv.innerHTML = `
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nom complet</th>
                                    <th>Date de naissance</th>
                                    <th>T√©l√©phone</th>
                                    <th>üî´ PPA</th>
                                    <th>Rapports</th>
                                    <th>Tickets</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${civilians.slice().reverse().map(c => {
                                    const civilianReports = reports.filter(r => r.civilianName && r.civilianName.toLowerCase() === c.fullName.toLowerCase());
                                    const civilianTickets = tickets.filter(t => t.civilianName.toLowerCase() === c.fullName.toLowerCase());
                                    return `
                                        <tr>
                                            <td><strong>${c.fullName}</strong></td>
                                            <td>${new Date(c.dob).toLocaleDateString('fr-FR')}</td>
                                            <td>${c.phone || 'N/A'}</td>
                                            <td><span class="badge ${c.ppa === 'valid' ? 'badge-active' : c.ppa === 'none' ? 'badge-closed' : 'badge-danger'}">${c.ppa === 'valid' ? 'Valide' : c.ppa === 'none' ? 'Aucun' : c.ppa}</span></td>
                                            <td><span class="badge ${civilianReports.length > 0 ? 'badge-info' : 'badge-closed'}">${civilianReports.length}</span></td>
                                            <td><span class="badge ${civilianTickets.length > 0 ? 'badge-warning' : 'badge-closed'}">${civilianTickets.length}</span></td>
                                            <td><button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="viewCivilianDetails('${c.fullName}')">Voir d√©tails</button></td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            }
        }

        function viewCivilianDetails(fullName) {
            // Simulate clicking on search
            document.getElementById('civilianSearchInput').value = fullName;
            searchCivilian();
            // Scroll to search section
            document.querySelector('#civilians .panel:first-child').scrollIntoView({ behavior: 'smooth' });
        }

        function updateDashboardStats() {
            // Update stats on dashboard
            const statsCards = document.querySelectorAll('#dashboard .stat-card .stat-value');
            if (statsCards.length >= 3) {
                statsCards[1].textContent = reports.length; // Rapports ce mois
                statsCards[2].textContent = tickets.length; // Tickets √©mis
            }

            // Update PPA stats
            const ppaStats = document.querySelectorAll('#dashboard .panel-highlight .stat-card .stat-value');
            if (ppaStats.length >= 4) {
                const validPPA = civilians.filter(c => c.ppa === 'valid').length;
                const expiredPPA = civilians.filter(c => c.ppa === 'expired').length;
                const revokedPPA = civilians.filter(c => c.ppa === 'revoked').length;
                
                ppaStats[0].textContent = validPPA;
                ppaStats[1].textContent = expiredPPA;
                ppaStats[2].textContent = revokedPPA;
            }
        }
    </script>
</body>
</html>